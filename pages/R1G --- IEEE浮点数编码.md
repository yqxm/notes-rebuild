note-type:: Reference
source-type:: book
source-id:: csapp3zh

- #+BEGIN_PINNED
  Bryant, R. E., & O’Hallaron, D. R. (2016). 深入理解计算机系统 (龚奕利 & 贺莲, Trans.; Third Edition). 机械工业出版社.p75-82
  #+END_PINNED
- ## 浮点数的表示
	- IEEE用 $V=(-1)^s \times M \times 2^E$ 来表示一个数
		- 符号 $s$ 表示是否为负数
		- 尾数 $M$ 表示一个二进制小数，它的范围是 $1 \sim 2-\varepsilon$ ，或者是 $0 \sim 1-\varepsilon$
		- 阶码 $E$ 对浮点数加权，权重是2的 $E$ 次幂
- ## 浮点数的编码
	- ### 编码字段
		- 将浮点数的位表示划分为三个字段，分别对这些值进行编码:
			- 一个单独的符号位 $s$ 直接编码符号 $s$
			- $k$ 位的阶码字段 $\text{exp}=e_{k-1} \mathellipsis e_1 e_0$ 编码符号 $E$
			- $n$ 位的小数字段 $\text{frac} = f_{n-1} \mathellipsis f_1 f_0$ 编码尾数 $M$ ，但编码出来的值也依赖于阶码的值是否为0。
		- 对单精度浮点数来说，s、exp和frac字段分别为1位、8位和23位。 $k = 8$ ， $n = 23$
		- 对双精度浮点数来说，s、exp和frac字段分别位1位、11位和52位。 $k = 11$ ， $n = 52$
	- ### 三种情况
		- 根据exp的值，被编码的值可以有三种情况:
			- #### 规格化的值，exp字段既不全为0，也不全为1
				- *阶码*
					- exp字段既不为0，也不全为1。此时阶码字段是以偏置形式表示的有符号整数。阶码的值是 $E = e - \text{Bias}$
						- $e$ 是无符号数，它的值是 $e_{k-1} \mathellipsis e_1 e_0$
						- $Bias$ 是偏置量，它的值是 $2^{k-1}-1$ 。当 $k = 8$ 时，它等于127。当 $k = 11$ 时，它等于1023。
					- 单精度浮点数在此情况下阶码的范围是 $[-126, 127]$
					- 双精度浮点数在此情况下阶码的范围是 $[-1022, 1023]$
				- *尾数*
					- frac字段表示小数位，即 $0.f_{n-1}f_{n-2} \mathellipsis f_1f_0$ 。尾数 $M = 1 + f$
				- *绝对值最小值*
					- $1 \times 2^{1- \text{Bias}}$
			- #### 非规格化的值，exp字段全为0
				- 非规格化的值的用途
					- 提供了表示0的办法，但有 $+0.0$ 和 $-0.0$
					- 它的值是逐渐溢出的，均匀的分布在0.0的周围，向规格化值的范围靠近
				- *阶码*
					- $E = 1 - \text{Bias}$
				- *尾数*
					- $M = f$
				- *绝对值最大值*
					- $f_{max} \times 2^{1-\text{bias}}$
			- ### 特殊值，阶码值全为1
				- *当小数域全为0时*
					- $s = 0$ 表示 $+\infty$
					- $s = 1$ 表示 $-\infty$
				- *当小数域非零时*
					- $NaN$
-